# アプリケーション構造と動作に関するTips

## 1. アプリケーションの基本構造
- プロジェクトはFlaskを使用したWebアプリケーション
- メインコードは`task_manager/app`ディレクトリに配置
- 主要コンポーネント：
  - `__init__.py`: アプリケーションの初期化と設定
  - `models.py`: データベースモデルの定義
  - `routes/`: APIエンドポイントの定義

## 2. コンテナ起動時の動作フロー
1. `create_app()`関数による初期化
2. 初期化ステップ：
   - Flaskアプリケーションのインスタンス作成
   - データベース（MySQL）の設定
   - SQLAlchemyとLoginManagerの初期化
   - ルート（エンドポイント）の登録
   - データベーステーブルの自動作成

## 3. 主要コンポーネントの連携
### データベース連携
- SQLAlchemyを使用してMySQLデータベースと接続
- 環境変数`DATABASE_URL`で接続情報を管理
- 接続文字列例：`mysql://user:password@db:3306/task_manager`

### 認証システム
- Flask-Loginを使用したユーザー認証
- `login_manager`でセッション管理
- ログインビュー設定：`auth.login`

### ルーティング
- `routes`ディレクトリ内のモジュールでAPIエンドポイントを定義
- メインルートと認証関連のルートを分離
- ブループリントを使用したモジュール化

## 4. ヘルスチェック機能
- `/health`エンドポイントでアプリケーションの状態を確認
- レスポンス形式：
  ```json
  {
    "status": "healthy",
    "message": "Task Manager API is running"
  }
  ```

## 5. 初学者向け重要ポイント
### 環境変数の活用
- コンテナ化されたアプリケーションでは環境変数を使用
- 設定の柔軟な変更が可能
- 異なる環境（開発・テスト・本番）での設定切り替えが容易

### アプリケーション初期化
- 依存関係の順序を考慮した初期化
- 各コンポーネントの適切な初期化順序
- エラーハンドリングの重要性

### モジュール化の利点
- コードの保守性向上
- 機能の拡張が容易
- テストのしやすさ
- チーム開発での作業分担が容易

## 6. 開発時の注意点
- 環境変数の適切な設定
- データベース接続情報の管理
- セキュリティ設定の確認
- ログ出力の適切な設定 